function formatSentence(name, sentence) {
  // sentence.replace(new RegExp(`[${name}]`, 'ig'), char => `<i>${char}</i>`);
  var rexp = getRegExp('[' + name + ']', 'ig');
  return '"' + sentence.replace(rexp, function(char){
    return '<strong style="color: rgb(20, 184, 166)">' + char + '</strong>';
  }) + '"';
};

function formatArticle(content) {
  if (!content) return "暂无";

  var rexp = getRegExp('\s+', 'ig');
  content = content.replace(rexp, '');
   // 移除html标签
  rexp = getRegExp('<[^>]*>', 'ig');
  content = content.replace(rexp, '');
  rexp = getRegExp('\n+', 'ig');
  content = content.replace(rexp, '');
  // 匹配两种情况：
  // 1. ([。！？；：》】])(”)(?=\S) : 标点 + 引号，且后面跟非空白字符（确保不是结尾）
  // 2. ([。！？；》】])(?!”|’|」|』|\)|）)(?=\S) : 标点，且后面不是引号或括号，且后面跟非空白字符
  // 使用 (?:) 表示非捕获组，提高效率
  rexp = getRegExp('([。！？；：》】])(”)(?=\\S)|([。！？；》】])(?![”’」』\\)）])(?=\\S)', 'ig');
  content = content.replace(rexp, function(match, p1, p2, p3) {
    // 如果匹配到的是第一种情况 (p1 和 p2 有值)
    if (p1 !== undefined && p2 !== undefined) {
      return p1 + p2 + '\n';
    }
    // 如果匹配到的是第二种情况 (p3 有值)
    else if (p3 !== undefined) {
      return p3 + '\n';
    }
    // 理论上不会执行到这里
    return match;
  });
  return content;
}

module.exports = {
  formatSentence: formatSentence,
  formatArticle: formatArticle,
};